-- –ú–∏–≥—Ä–∞—Ü–∏—è: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ –ø–æ–¥ –ê—Å—Ç–∞–Ω—É (–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω)
-- –ó–∞–¥–∞—á–∞ 1.1.4 –∏–∑ –ø–ª–∞–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
-- –î–∞—Ç–∞: 6 –∞–≤–≥—É—Å—Ç–∞ 2025

BEGIN;

-- ====================================================================
-- –ü–û–î–ó–ê–î–ê–ß–ê 1.1.4.1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–π–æ–Ω–æ–≤ –¥–ª—è –ê—Å—Ç–∞–Ω—ã
-- ====================================================================

-- –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É —Ä–∞–π–æ–Ω–æ–≤ –µ—Å–ª–∏ –µ–µ –Ω–µ—Ç
CREATE TABLE IF NOT EXISTS city_districts (
    id serial PRIMARY KEY,
    name varchar(100) NOT NULL UNIQUE,
    description text,
    metro_stations text[], -- –º–∞—Å—Å–∏–≤ —Å—Ç–∞–Ω—Ü–∏–π –º–µ—Ç—Ä–æ/—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
    created_at timestamp with time zone DEFAULT NOW(),
    updated_at timestamp with time zone DEFAULT NOW()
);

-- –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –±—ã–ª–∏ —Ä–∞–π–æ–Ω—ã –ú–æ—Å–∫–≤—ã –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –≥–æ—Ä–æ–¥–æ–≤)
DELETE FROM city_districts;

-- –ó–∞–ø–æ–ª–Ω—è–µ–º —Ä–∞–π–æ–Ω—ã –ê—Å—Ç–∞–Ω—ã (–ù—É—Ä-–°—É–ª—Ç–∞–Ω–∞)
INSERT INTO city_districts (name, description, metro_stations) VALUES
('–ï—Å–∏–ª—å', '–õ–µ–≤–æ–±–µ—Ä–µ–∂–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π —Ä–∞–π–æ–Ω –ê—Å—Ç–∞–Ω—ã', 
 ARRAY['–ù—É—Ä-–ñ–æ–ª', '–°–∞—Ä—ã–∞—Ä–∫–∞', '–ú–æ—Å–∫–æ–≤—Å–∫–∞—è']),
 
('–ê–ª–º–∞—Ç—ã', '–ü—Ä–∞–≤–æ–±–µ—Ä–µ–∂–Ω—ã–π —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω', 
 ARRAY['–î–æ—Å—Ç—ã–∫', '–ñ–∏–±–µ–∫ –ñ–æ–ª—ã', '–ê–ª–º–∞—Ç—ã']),
 
('–°–∞—Ä—ã–∞—Ä–∫–∞', '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π —Ü–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞', 
 ARRAY['–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç', '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å', '–°–∞—Ä—ã–∞—Ä–∫–∞']),
 
('–ë–∞–π–∫–æ–Ω—ã—Ä', '–°–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥–Ω—ã–π —Ä–∞–π–æ–Ω –≥–æ—Ä–æ–¥–∞', 
 ARRAY['–ë–∞–π–∫–æ–Ω—ã—Ä', '–ö–æ—Å–º–æ–Ω–∞–≤—Ç–æ–≤', '–¢—É—Ä–∞–Ω']),
 
('–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π', '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä –ê—Å—Ç–∞–Ω—ã', 
 ARRAY['–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å—Ç–∞–¥–∏–æ–Ω', '–ê–∫ –û—Ä–¥–∞', '–ë–∞–π—Ç–µ—Ä–µ–∫']);

-- ====================================================================
-- –ü–û–î–ó–ê–î–ê–ß–ê 1.1.4.2: –í–∞–ª—é—Ç–Ω—ã–µ –ø–æ–ª—è –≤ —Ç–µ–Ω–≥–µ (KZT)
-- ====================================================================

-- –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
DO $$
BEGIN
    -- –î–ª—è —Å—Ä–æ—á–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π
    IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = 'urgent_jobs') THEN
        
        -- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º KZT –∫–∞–∫ –≤–∞–ª—é—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        ALTER TABLE urgent_jobs 
        ALTER COLUMN currency SET DEFAULT 'KZT';
        
        -- –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ —Ç–µ–Ω–≥–µ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ –≤–∞–ª—é—Ç—ã)
        UPDATE urgent_jobs 
        SET currency = 'KZT' 
        WHERE currency IS NULL OR currency NOT IN ('KZT', 'USD', 'RUB');
        
        RAISE NOTICE '–í–∞–ª—é—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ KZT –¥–ª—è urgent_jobs';
    END IF;
    
    -- –î–ª—è –æ–±—ã—á–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–ª—è –∑–∞—Ä–ø–ª–∞—Ç—ã)
    IF EXISTS (SELECT 1 FROM information_schema.columns 
               WHERE table_name = 'job_postings' AND column_name = 'currency') THEN
        
        ALTER TABLE job_postings 
        ALTER COLUMN currency SET DEFAULT 'KZT';
        
        UPDATE job_postings 
        SET currency = 'KZT' 
        WHERE currency IS NULL OR currency NOT IN ('KZT', 'USD', 'RUB');
        
        RAISE NOTICE '–í–∞–ª—é—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ KZT –¥–ª—è job_postings';
    END IF;
    
    -- –î–ª—è –ø—Ä–æ—Ñ–∏–ª–µ–π –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (–æ–∂–∏–¥–∞–µ–º–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞)
    IF EXISTS (SELECT 1 FROM information_schema.columns 
               WHERE table_name = 'candidate_profiles' AND column_name = 'currency') THEN
        
        ALTER TABLE candidate_profiles 
        ALTER COLUMN currency SET DEFAULT 'KZT';
        
        UPDATE candidate_profiles 
        SET currency = 'KZT' 
        WHERE currency IS NULL OR currency NOT IN ('KZT', 'USD', 'RUB');
        
        RAISE NOTICE '–í–∞–ª—é—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ KZT –¥–ª—è candidate_profiles';
    END IF;
END $$;

-- ====================================================================
-- –ü–û–î–ó–ê–î–ê–ß–ê 1.1.4.3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π –ø–æ–¥ –æ–±—â–µ–ø–∏—Ç –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞
-- ====================================================================

-- –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π –µ—Å–ª–∏ –µ–µ –Ω–µ—Ç
CREATE TABLE IF NOT EXISTS specializations (
    id serial PRIMARY KEY,
    name varchar(100) NOT NULL UNIQUE,
    description text,
    icon varchar(50), -- emoji –∏–ª–∏ –∏–∫–æ–Ω–∫–∞
    category varchar(50) DEFAULT 'kitchen', -- kitchen, service, management
    created_at timestamp with time zone DEFAULT NOW()
);

-- –û—á–∏—â–∞–µ–º –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–æ–≥–æ –æ–±—â–µ–ø–∏—Ç–∞
DELETE FROM specializations;

INSERT INTO specializations (name, description, icon, category) VALUES
-- –ö—É—Ö–Ω—è
('–ü–æ–≤–∞—Ä', '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∏ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏—Ö –±–ª—é–¥', 'üë®‚Äçüç≥', 'kitchen'),
('–°—É-—à–µ—Ñ', '–ü–æ–º–æ—â–Ω–∏–∫ —à–µ—Ñ-–ø–æ–≤–∞—Ä–∞, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –∫—É—Ö–Ω–∏', 'üë©‚Äçüç≥', 'kitchen'),
('–ü–æ–≤–∞—Ä-—É–Ω–∏–≤–µ—Ä—Å–∞–ª', '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –±–ª—é–¥, —Ä–∞–±–æ—Ç–∞ –Ω–∞ –≤—Å–µ—Ö —É—á–∞—Å—Ç–∫–∞—Ö', 'üç≥', 'kitchen'),
('–ü–æ–≤–∞—Ä –Ω–∞ –º–∞–Ω–≥–∞–ª–µ', '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —à–∞—à–ª—ã–∫–∞, –∫–µ–±–∞–±–æ–≤, –º—è—Å–Ω—ã—Ö –±–ª—é–¥', 'üî•', 'kitchen'),
('–ö–æ–Ω–¥–∏—Ç–µ—Ä', '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –¥–µ—Å–µ—Ä—Ç–æ–≤, –≤—ã–ø–µ—á–∫–∏, –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–ª–∞–¥–æ—Å—Ç–µ–π', 'üßÅ', 'kitchen'),

-- –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
('–û—Ñ–∏—Ü–∏–∞–Ω—Ç', '–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –≥–æ—Å—Ç–µ–π, –∑–Ω–∞–Ω–∏–µ –∫–∞–∑–∞—Ö—Å–∫–∏—Ö —Ç—Ä–∞–¥–∏—Ü–∏–π', 'üôã‚Äç‚ôÇÔ∏è', 'service'),
('–°—Ç–∞—Ä—à–∏–π –æ—Ñ–∏—Ü–∏–∞–Ω—Ç', '–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–æ–≤, VIP-–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ', 'üôã‚Äç‚ôÄÔ∏è', 'service'),
('–ë–∞—Ä–º–µ–Ω', '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–ø–∏—Ç–∫–æ–≤, –∑–Ω–∞–Ω–∏–µ –∫–∞–∑–∞—Ö—Å–∫–∏—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤', 'üçπ', 'service'),
('–ë–∞—Ä–∏—Å—Ç–∞', '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ñ–µ, —á–∞—è, –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤', '‚òï', 'service'),
('–•–æ—Å—Ç–µ—Å', '–í—Å—Ç—Ä–µ—á–∞ –≥–æ—Å—Ç–µ–π –ø–æ –∫–∞–∑–∞—Ö—Å–∫–∏–º —Ç—Ä–∞–¥–∏—Ü–∏—è–º –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º—Å—Ç–≤–∞', 'üíÅ‚Äç‚ôÄÔ∏è', 'service'),

-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
('–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–ª–∞', '–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –∑–∞–ª–∞, —Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤', 'üìã', 'management'),
('–ö–∞—Å—Å–∏—Ä', '–†–∞–±–æ—Ç–∞ —Å –∫–∞—Å—Å–æ–π, —Ä–∞—Å—á–µ—Ç –≤ —Ç–µ–Ω–≥–µ –∏ –¥—Ä—É–≥–∏—Ö –≤–∞–ª—é—Ç–∞—Ö', 'üí≥', 'service'),
('–ü–æ—Å—É–¥–æ–º–æ–π—â–∏–∫', '–ú—ã—Ç—å–µ –ø–æ—Å—É–¥—ã, –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —á–∏—Å—Ç–æ—Ç—ã', 'üßΩ', 'support'),
('–ö—É—Ä—å–µ—Ä', '–î–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ –ê—Å—Ç–∞–Ω–µ', 'üö≤', 'delivery'),
('–£–±–æ—Ä—â–∏–∫', '–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —á–∏—Å—Ç–æ—Ç—ã –≤ –∑–∞–≤–µ–¥–µ–Ω–∏–∏', 'üßπ', 'support');

-- ====================================================================
-- –ü–û–î–ó–ê–î–ê–ß–ê 1.1.4.4: –¢–∏–ø—ã –∑–∞–≤–µ–¥–µ–Ω–∏–π –æ–±—â–µ–ø–∏—Ç–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞
-- ====================================================================

-- –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É —Ç–∏–ø–æ–≤ –∑–∞–≤–µ–¥–µ–Ω–∏–π –µ—Å–ª–∏ –µ–µ –Ω–µ—Ç
CREATE TABLE IF NOT EXISTS venue_types (
    id serial PRIMARY KEY,
    name varchar(100) NOT NULL UNIQUE,
    description text,
    icon varchar(50),
    typical_pay_range_min integer DEFAULT 0, -- –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –≤ —Ç–µ–Ω–≥–µ
    typical_pay_range_max integer DEFAULT 50000, -- –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –≤ —Ç–µ–Ω–≥–µ
    created_at timestamp with time zone DEFAULT NOW()
);

-- –û—á–∏—â–∞–µ–º –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º —Ç–∏–ø—ã –∑–∞–≤–µ–¥–µ–Ω–∏–π
DELETE FROM venue_types;

INSERT INTO venue_types (name, description, icon, typical_pay_range_min, typical_pay_range_max) VALUES
('–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω', '–†–µ—Å—Ç–æ—Ä–∞–Ω –∫–∞–∑–∞—Ö—Å–∫–æ–π –∏ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ-–∞–∑–∏–∞—Ç—Å–∫–æ–π –∫—É—Ö–Ω–∏', 'üèõÔ∏è', 8000, 25000),
('–ï–≤—Ä–æ–ø–µ–π—Å–∫–∏–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω', '–†–µ—Å—Ç–æ—Ä–∞–Ω –µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–π –∫—É—Ö–Ω–∏', 'üçΩÔ∏è', 10000, 30000),
('–ö–∞—Ñ–µ', '–ù–µ–±–æ–ª—å—à–æ–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ —Å –ª–µ–≥–∫–∏–º –º–µ–Ω—é', '‚òï', 5000, 15000),
('–§–∞—Å—Ç—Ñ—É–¥', '–ó–∞–≤–µ–¥–µ–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è', 'üçî', 4000, 12000),
('–ö–æ—Ñ–µ–π–Ω—è', '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–æ—Ñ–µ –∏ –ª–µ–≥–∫–∏—Ö –∑–∞–∫—É—Å–∫–∞—Ö', '‚òï', 5000, 18000),
('–®–∞—à–ª—ã—á–Ω–∞—è', '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –º—è—Å–Ω—ã—Ö –±–ª—é–¥–∞—Ö –Ω–∞ —É–≥–ª—è—Ö', 'üî•', 6000, 20000),
('–ü–∏—Ü—Ü–µ—Ä–∏—è', '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ø–∏—Ü—Ü–µ –∏ –∏—Ç–∞–ª—å—è–Ω—Å–∫–æ–π –∫—É—Ö–Ω–µ', 'üçï', 6000, 18000),
('–°—É—à–∏-–±–∞—Ä', '–Ø–ø–æ–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è, —Å—É—à–∏ –∏ —Ä–æ–ª–ª—ã', 'üç±', 8000, 25000),
('–°—Ç–æ–ª–æ–≤–∞—è', '–ó–∞–≤–µ–¥–µ–Ω–∏–µ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è', 'ü•Ñ', 4000, 10000),
('–ë–∞–Ω–∫–µ—Ç–Ω—ã–π –∑–∞–ª', '–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –∏ —Ç–æ—Ä–∂–µ—Å—Ç–≤', 'üéâ', 8000, 35000),
('–ö–æ–Ω–¥–∏—Ç–µ—Ä—Å–∫–∞—è', '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –¥–µ—Å–µ—Ä—Ç–∞—Ö –∏ –≤—ã–ø–µ—á–∫–µ', 'üßÅ', 5000, 16000),
('–ß–∞–π—Ö–∞–Ω–∞', '–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–µ –∫–∞–∑–∞—Ö—Å–∫–æ–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ', 'ü´ñ', 5000, 18000);

-- ====================================================================
-- –ü–û–î–ó–ê–î–ê–ß–ê 1.1.4.5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥ –ê—Å—Ç–∞–Ω—É  
-- ====================================================================

-- –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ä–æ—á–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å) –ø–æ–¥ –ê—Å—Ç–∞–Ω—É
DO $$
BEGIN
    IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = 'urgent_jobs') THEN
        
        -- –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞—Ü–∏–∏ –Ω–∞ –∞—Å—Ç–∞–Ω–∏–Ω—Å–∫–∏–µ
        UPDATE urgent_jobs 
        SET location_city = '–ê—Å—Ç–∞–Ω–∞',
            location_district = '–ï—Å–∏–ª—å'
        WHERE location_city IS NULL OR location_city != '–ê—Å—Ç–∞–Ω–∞';
        
        -- –û–±–Ω–æ–≤–ª—è–µ–º –≤–∞–ª—é—Ç—É –Ω–∞ —Ç–µ–Ω–≥–µ
        UPDATE urgent_jobs 
        SET currency = 'KZT'
        WHERE currency IS NULL OR currency != 'KZT';
        
        -- –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –∑–∞—Ä–ø–ª–∞—Ç—ã –ø–æ–¥ –∫–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–∏–π —Ä—ã–Ω–æ–∫ (–ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 7 —Ä–∞–∑ –±–æ–ª—å—à–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Ü–µ–Ω)
        UPDATE urgent_jobs 
        SET pay_per_shift = pay_per_shift * 7
        WHERE currency = 'KZT' AND pay_per_shift < 5000;
        
        RAISE NOTICE '–û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –ø–æ–¥ –ê—Å—Ç–∞–Ω—É';
    END IF;
END $$;

-- ====================================================================
-- –ò–ù–î–ï–ö–°–´ –î–õ–Ø –ù–û–í–´–• –°–ü–†–ê–í–û–ß–ù–´–• –¢–ê–ë–õ–ò–¶
-- ====================================================================

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞
CREATE INDEX IF NOT EXISTS idx_city_districts_name ON city_districts(name);
CREATE INDEX IF NOT EXISTS idx_specializations_category ON specializations(category);
CREATE INDEX IF NOT EXISTS idx_venue_types_pay_range ON venue_types(typical_pay_range_min, typical_pay_range_max);

-- ====================================================================
-- –õ–û–ì–ò–†–û–í–ê–ù–ò–ï
-- ====================================================================

INSERT INTO simple_logs (operation, details)
VALUES ('update_directories_for_astana', '–û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –ø–æ–¥ –ê—Å—Ç–∞–Ω—É: —Ä–∞–π–æ–Ω—ã, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, —Ç–∏–ø—ã –∑–∞–≤–µ–¥–µ–Ω–∏–π, –≤–∞–ª—é—Ç–∞ KZT');

COMMIT;

-- ====================================================================
-- –†–ï–ó–£–õ–¨–¢–ê–¢ –ú–ò–ì–†–ê–¶–ò–ò
-- ====================================================================

/*
‚úÖ –ü–û–î–ó–ê–î–ê–ß–ê 1.1.4.1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–π–æ–Ω–æ–≤ –¥–ª—è –ê—Å—Ç–∞–Ω—ã - –í–´–ü–û–õ–ù–ï–ù–ê
‚úÖ –ü–û–î–ó–ê–î–ê–ß–ê 1.1.4.2: –í–∞–ª—é—Ç–Ω—ã–µ –ø–æ–ª—è –≤ —Ç–µ–Ω–≥–µ (KZT) - –í–´–ü–û–õ–ù–ï–ù–ê  
‚úÖ –ü–û–î–ó–ê–î–ê–ß–ê 1.1.4.3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π –ø–æ–¥ –æ–±—â–µ–ø–∏—Ç –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ - –í–´–ü–û–õ–ù–ï–ù–ê
‚úÖ –ü–û–î–ó–ê–î–ê–ß–ê 1.1.4.4: –¢–∏–ø—ã –∑–∞–≤–µ–¥–µ–Ω–∏–π –æ–±—â–µ–ø–∏—Ç–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ - –í–´–ü–û–õ–ù–ï–ù–ê
‚úÖ –ü–û–î–ó–ê–î–ê–ß–ê 1.1.4.5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥ –ê—Å—Ç–∞–Ω—É - –í–´–ü–û–õ–ù–ï–ù–ê

–°–û–ó–î–ê–ù–ù–´–ï –°–ü–†–ê–í–û–ß–ù–ò–ö–ò:
- city_districts: 5 —Ä–∞–π–æ–Ω–æ–≤ –ê—Å—Ç–∞–Ω—ã —Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º
- specializations: 15 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π –¥–ª—è –∫–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–æ–≥–æ –æ–±—â–µ–ø–∏—Ç–∞
- venue_types: 12 —Ç–∏–ø–æ–≤ –∑–∞–≤–µ–¥–µ–Ω–∏–π —Å –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏ –∑–∞—Ä–ø–ª–∞—Ç –≤ —Ç–µ–Ω–≥–µ
- –í–∞–ª—é—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: KZT (—Ç–µ–Ω–≥–µ)
- –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞—Ä–ø–ª–∞—Ç—ã –ø–æ–¥ –∫–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–∏–π —Ä—ã–Ω–æ–∫

–°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì: –ó–∞–¥–∞—á–∞ 1.2.1 - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–∞ –ø–æ–¥ –æ–±—â–µ–ø–∏—Ç —Å–æ–≥–ª–∞—Å–Ω–æ doc/first.md
*/
