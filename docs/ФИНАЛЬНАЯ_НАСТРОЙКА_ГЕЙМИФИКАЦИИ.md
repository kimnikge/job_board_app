# üéÆ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê –°–ò–°–¢–ï–ú–´ –ì–ï–ô–ú–ò–§–ò–ö–ê–¶–ò–ò

## üìã –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –≤ Supabase SQL Editor:

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π ‚öôÔ∏è

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞:** `gamification_triggers.sql`

**–ß—Ç–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ:**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤—ã–¥–∞—á–∏ –±–µ–π–¥–∂–µ–π `auto_award_badge()`
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ –Ω–∞–≤—ã–∫–æ–≤ `recalculate_user_skills()`
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ work_logs –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±–µ–π–¥–∂–µ–π
- ‚úÖ RPC —Ñ—É–Ω–∫—Ü–∏—è `get_user_profile_full()` –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- ‚úÖ RPC —Ñ—É–Ω–∫—Ü–∏—è `award_manual_badge()` –¥–ª—è —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö üß™

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞:** `test_gamification_data.sql`

**–ß—Ç–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ 3 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è (Coffee House, Burger King, Dastarkhan)
- ‚úÖ 3 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–∞–∑–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º –æ–ø—ã—Ç–∞
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ Work logs, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞–¥—É—Ç –±–µ–π–¥–∂–∏
- ‚úÖ –ù–µ—Å–∫–æ–ª—å–∫–æ —Ä—É—á–Ω—ã—Ö –±–µ–π–¥–∂–µ–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã üîç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±–∞ —Ñ–∞–π–ª–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```sql
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞–Ω–Ω—ã–µ –±–µ–π–¥–∂–∏
SELECT 
    up.full_name,
    b.name as badge_name,
    b.category,
    b.level,
    ub.source,
    ub.awarded_at
FROM public.user_badges ub
JOIN public.badges b ON ub.badge_id = b.id
JOIN public.user_profiles up ON ub.user_id = up.id
ORDER BY up.full_name, ub.awarded_at;
```

```sql
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ—Å—á–µ—Ç –Ω–∞–≤—ã–∫–æ–≤
SELECT 
    up.full_name,
    s.name as skill_name,
    s.base_level,
    s.calculated_level,
    (s.calculated_level - s.base_level) as badge_bonus
FROM public.skills s
JOIN public.user_profiles up ON s.user_id = up.id
ORDER BY up.full_name, s.calculated_level DESC;
```

```sql
-- –¢–µ—Å—Ç–∏—Ä—É–µ–º RPC —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
SELECT public.get_user_profile_full('650e8400-e29b-41d4-a716-446655440001');
```

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

### –ê–π–±–µ–∫ –†–∞–±–æ—Ç–Ω–∏–∫ (–æ–ø—ã—Ç–Ω—ã–π):
- ü•à **Growing Professional** (Silver Experience) - 75+ —Å–º–µ–Ω
- ü•â **Newcomer** (Bronze Loyalty) - —Å –∫–∞–∂–¥—ã–º —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–º  
- ü•à **Regular Member** (Silver Loyalty) - 20+ —Å–º–µ–Ω —Å Coffee House
- ü•à **Hard Skills Practitioner** (—Ä—É—á–Ω–∞—è –≤—ã–¥–∞—á–∞)
- üìà **–ù–∞–≤—ã–∫–∏ –ø–æ–≤—ã—à–µ–Ω—ã** –±–ª–∞–≥–æ–¥–∞—Ä—è –±–µ–π–¥–∂–∞–º

### –ú–∞—Ä–∏—è –ö–æ—Ñ–µ–º–∞–Ω–æ–≤–∞ (–Ω–æ–≤–∏—á–æ–∫):
- ü•â **First Steps** (Bronze Experience) - –ø–µ—Ä–≤—ã–π work_log
- ü•â **Newcomer** (Bronze Loyalty) - —Å Burger King
- üìà **–ù–∞–≤—ã–∫–∏ –ø–æ–ª—É—á–∏–ª–∏ –Ω–µ–±–æ–ª—å—à–æ–π –±–æ–Ω—É—Å**

### –ù—É—Ä–ª–∞–Ω –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª (–≤–µ—Ç–µ—Ä–∞–Ω):
- ü•á **Seasoned Worker** (Gold Experience) - 200+ —Å–º–µ–Ω
- ü•á **Loyal Partner** (Gold Loyalty) - 50+ —Å–º–µ–Ω —Å Dastarkhan
- ü•à **Regular Member** (Silver Loyalty) - —Å Coffee House
- ü•á **Team Champion** (—Ä—É—á–Ω–∞—è –≤—ã–¥–∞—á–∞)
- üèÜ **Exceptional Performer** - –≤—ã—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥ 4.8+
- üìà **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ–∫–∞—á–∞–Ω–Ω—ã–µ –Ω–∞–≤—ã–∫–∏**

## üöÄ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É –≤–∞—Å –±—É–¥–µ—Ç:

‚úÖ **–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏**
‚úÖ **32 –±–∞–∑–æ–≤—ã—Ö –±–µ–π–¥–∂–∞ –ø–æ 8 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º**  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤—ã–¥–∞—á–∏ –±–µ–π–¥–∂–µ–π**
‚úÖ **–ü–µ—Ä–µ—Å—á–µ—Ç –Ω–∞–≤—ã–∫–æ–≤ —Å —É—á–µ—Ç–æ–º –±–µ–π–¥–∂–µ–π**
‚úÖ **API —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞**
‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏**

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (—Ñ–∞–∑–∞ R4):

1. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–µ—Ä–≤–∏—Å—ã** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ë–î
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ—Ñ–∏–ª—è** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
3. **–î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –±–µ–π–¥–∂–µ–π
4. **–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–π–¥–∂–∞–º–∏

---

**–ì–æ—Ç–æ–≤—ã –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ? –í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–±–∞ SQL —Ñ–∞–π–ª–∞ –≤ Supabase! üéÆ**
